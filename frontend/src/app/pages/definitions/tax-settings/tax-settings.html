<div class="bg-white rounded shadow p-4">
    <div class="flex flex-col md:flex-row gap-6">

        <!-- Sidebar: Years -->
        <div class="w-full md:w-1/4 border-r pr-4">
            <div class="flex justify-between items-center mb-2">
                <h3 class="font-semibold text-lg">Yıllar</h3>
                <button (click)="addNewYear()" class="text-blue-600 hover:text-blue-800 text-sm font-medium">+
                    Ekle</button>
            </div>
            <ul class="space-y-1">
                <li *ngFor="let y of years()">
                    <button (click)="selectYear(y)" class="w-full text-left px-3 py-2 rounded transition-colors"
                        [ngClass]="{'bg-blue-100 text-blue-800 font-medium': selectedYear() === y, 'hover:bg-gray-100': selectedYear() !== y}">
                        {{ y }}
                    </button>
                </li>
            </ul>
        </div>

        <!-- Main: Form -->
        <div class="w-full md:w-3/4">
            <div *ngIf="selectedYear() === null" class="text-gray-500 text-center py-10">
                Düzenlemek için soldan bir yıl seçiniz.
            </div>

            <div *ngIf="selectedYear() !== null">
                <h2 class="text-xl font-bold mb-4">{{ selectedYear() }} Vergi Ayarları</h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">İstisna Tutarı (TL)</label>
                        <input type="number" [(ngModel)]="currentSettings().exemption_amount"
                            class="w-full border rounded px-3 py-2 text-gray-900 bg-white">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Beyan Sınırı (TL)</label>
                        <input type="number" [(ngModel)]="currentSettings().declaration_limit"
                            class="w-full border rounded px-3 py-2 text-gray-900 bg-white">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Götürü Gider Oranı (0.15
                            etc)</label>
                        <input type="number" step="0.01" [(ngModel)]="currentSettings().lump_sum_rate"
                            class="w-full border rounded px-3 py-2 text-gray-900 bg-white">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Stopaj Oranı (0.20 etc)</label>
                        <input type="number" step="0.01" [(ngModel)]="currentSettings().withholding_rate"
                            class="w-full border rounded px-3 py-2 text-gray-900 bg-white">
                    </div>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Vergi Dilimleri (JSON)</label>
                    <textarea [(ngModel)]="currentSettings().tax_brackets" rows="6"
                        class="w-full border rounded px-3 py-2 text-gray-900 bg-white font-mono text-sm"></textarea>
                    <p class="text-xs text-gray-500 mt-1">Örn: [&#123;"limit": 110000, "rate": 0.15&#125;,
                        &#123;"limit":
                        230000,
                        "rate": 0.20&#125; ...]</p>
                </div>

                <div class="flex justify-end">
                    <button (click)="save()"
                        class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">Kaydet</button>
                </div>
            </div>
        </div>

    </div>
</div>